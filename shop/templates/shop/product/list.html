{% extends "shop/base.html" %}
{% load static %}

{% block title %}
    {% if category %}{{ category.name }}{% else %}–ö–∞—Ç–∞–ª–æ–≥{% endif %}
{% endblock %}

{% block content %}

{% if not category %}
<div class="hero-section text-center" data-aos="zoom-in">
    <h1 class="display-3 fw-bold mb-3">–õ–µ—Ç–Ω—è—è –ö–æ–ª–ª–µ–∫—Ü–∏—è 2025</h1>
    <p class="lead mb-4">–°–∫–∏–¥–∫–∏ –¥–æ 50% –Ω–∞ –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏. –ù–∞–π–¥–∏ —Å–≤–æ–π —Å—Ç–∏–ª—å —É–∂–µ —Å–µ–≥–æ–¥–Ω—è.</p>
    <a href="#products" class="btn btn-light btn-lg rounded-pill px-5 fw-bold text-primary shadow">–ö –ø–æ–∫—É–ø–∫–∞–º</a>
</div>
{% endif %}

<div class="row" id="products">
    <div class="col-lg-3 mb-4" data-aos="fade-right">
        <div class="bg-white p-3 rounded-4 shadow-sm sticky-top" style="top: 100px;">
            <h4 class="mb-3 px-3">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h4>
            <div class="list-group">
                <a href="{% url 'shop:product_list' %}" class="list-group-item {% if not category %}active{% endif %}">
                    üì¶ –í—Å–µ —Ç–æ–≤–∞—Ä—ã
                </a>
                {% for c in categories %}
                    <a href="{{ c.get_absolute_url }}" class="list-group-item {% if category.slug == c.slug %}active{% endif %}">
                        {{ c.name }}
                    </a>
                {% endfor %}
            </div>
        </div>
    </div>

    <div class="col-lg-9">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>{% if category %}{{ category.name }}{% else %}–í—Å–µ —Ç–æ–≤–∞—Ä—ã{% endif %}</h2>
            <span class="text-muted">{{ products|length }} —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞–π–¥–µ–Ω–æ</span>
        </div>

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            {% for product in products %}
            <div class="col" data-aos="fade-up" data-aos-delay="{{ forloop.counter }}00">
                <div class="card product-card h-100">
                    <a href="{{ product.get_absolute_url }}" class="product-image-wrapper">
                        {% if product.image %}
                            <img src="{{ product.image.url }}" alt="{{ product.name }}">
                        {% else %}
                             <img src="https://dummyimage.com/600x400/e0e0e0/ffffff&text=No+Image" alt="no image">
                        {% endif %}
                        {% if product.available %}
                            <span class="badge-custom">–í –Ω–∞–ª–∏—á–∏–∏</span>
                        {% endif %}
                    </a>

                    <div class="card-body d-flex flex-column">
                        <div class="mb-2">
                            <small class="text-muted">{{ product.category.name }}</small>
                        </div>
                        <h5 class="card-title mb-3">
                            <a href="{{ product.get_absolute_url }}" class="text-decoration-none text-dark">
                                {{ product.name }}
                            </a>
                        </h5>
                        
                        <div class="mt-auto d-flex justify-content-between align-items-center">
                            <span class="price-tag">${{ product.price }}</span>
                            <a href="{{ product.get_absolute_url }}" class="btn btn-primary btn-sm rounded-circle shadow-sm" style="width: 40px; height: 40px; padding: 0; display: flex; align-items: center; justify-content: center;">
                                ‚ûú
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if not products %}
            <div class="text-center py-5">
                <h3>–£–ø—Å! –¢–æ–≤–∞—Ä–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</h3>
                <p>–ó–∞–≥–ª—è–Ω–∏—Ç–µ –ø–æ–∑–∂–µ.</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}